<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8 />
	<title>  Kohl Kinning </title>
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="stylesheet" href="/css/pygment_trac.css">
	<link rel="stylesheet" href="/css/jquery.bxslider.css" />
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
	<script src="/js/jquery.bxslider.min.js"></script>

	<script src="https://use.typekit.net/nrf6yfy.js"></script>
	<script>try{Typekit.load({ async: true });}catch(e){}</script>
	<script src="/js/libs/three.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.2/p5.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.2/addons/p5.dom.js" type="text/javascript"></script>
	<script src="/js/libs/quicksettings.min.js"></script>
</head>

<body>
	<!-- Full-screen only animation canvas -->
	<div id="backgroundCanvas">
	<div class="wrapper">
		<header>
		<h1 style="text-align:center">Kohl Kinning</h1>
		<nav role="navigation">
			<ul>
				<li><a href="/"> About </a></li>
				<li><a href="/portfolio/"> Projects </a></li>
				<li><a href="/blog/"> Blog </a></li>
				<li><a href="/contact/"> Contact </a></li>
			</ul>

		</nav>
		</header>
		
		<section id="pane">		
		
			        <h2 class="content">P5 demo, softbody</h2>
          <p class="post-meta">
                06 Sep 2017
          </p>
	  <p class="post-meta">
		
	  </p>

	





        <div id="myCanvas"></div>
<script src="/js/softbody.js" type="text/javascript"></script>

<p>The above object is created with P5.js, a library which makes visualization very easy. The canvas resizes dynamically thanks to code by Chris Bamborough. This example was written by Ira Greenberg.</p>

<p>Here is the code which produces the softbody object.</p>
<div class="highlighter-rouge"><pre class="highlight"><code>var centerX = 0.0, centerY = 0.0;

var radius = 45, rotAngle = -90;
var accelX = 0.0, accelY = 0.0;

var deltaX = 0.0, deltaY = 0.0;
var springing = 0.0009, damping = 0.98;

//corner nodes
var nodes = 5;

//zero fill arrays
var nodeStartX = [];
var nodeStartY = [];
var nodeX = [];
var nodeY = [];
var angle = [];
var frequency = [];

// soft-body dynamics
var organicConstant = 1.0;

function setup() {
  var canvasDiv = document.getElementById('myCanvas');
  var width = canvasDiv.clientWidth;
  var height = canvasDiv.clientHeight;

  var sketchCanvas = createCanvas(width,250);
  sketchCanvas.parent('myCanvas');

  //center shape in window
  centerX = width/2;
  centerY = height/2;

  //initialize arrays to 0
  for (var i=0; i&lt;nodes; i++){
    nodeStartX[i] = 0;
    nodeStartY[i] = 0;
    nodeY[i] = 0;
    nodeY[i] = 0;
    angle[i] = 0;
  }

  // iniitalize frequencies for corner nodes
  for (var i=0; i&lt;nodes; i++){
    frequency[i] = random(5, 12);
  }

  noStroke();
  frameRate(30);
}

function draw() {
  //fade background
  fill(0, 100);
  rect(0,0,width, height);
  drawShape();
  moveShape();
}

function drawShape() {
  //  calculate node  starting locations
  for (var i=0; i&lt;nodes; i++){
    nodeStartX[i] = centerX+cos(radians(rotAngle))*radius;
    nodeStartY[i] = centerY+sin(radians(rotAngle))*radius;
    rotAngle += 360.0/nodes;
  }

  // draw polygon
  curveTightness(organicConstant);
  fill(255);
  beginShape();
  for (var i=0; i&lt;nodes; i++){
    curveVertex(nodeX[i], nodeY[i]);
  }
  for (var i=0; i&lt;nodes-1; i++){
    curveVertex(nodeX[i], nodeY[i]);
  }
  endShape(CLOSE);
}

function moveShape() {
  //move center point
  deltaX = mouseX-centerX;
  deltaY = mouseY-centerY;

  // create springing effect
  deltaX *= springing;
  deltaY *= springing;
  accelX += deltaX;
  accelY += deltaY;

  // move predator's center
  centerX += accelX;
  centerY += accelY;

  // slow down springing
  accelX *= damping;
  accelY *= damping;

  // change curve tightness
  organicConstant = 1-((abs(accelX)+abs(accelY))*0.1);

  //move nodes
  for (var i=0; i&lt;nodes; i++){
    nodeX[i] = nodeStartX[i]+sin(radians(angle[i]))*(accelX*2);
    nodeY[i] = nodeStartY[i]+sin(radians(angle[i]))*(accelY*2);
    angle[i] += frequency[i];
  }
}

</code></pre>
</div>

	

 
			 
		</section>
	<!-- animation canvas -->
	</div>
		<footer>
			<a href="https://bioinformatics.stackexchange.com/users/181/kohlkopf?tab=profile" > 
				<img width="32" height="32" src="https://unpkg.com/simple-icons@latest/icons/stackoverflow.svg" alt = "Find me on Stack Overflow" >
			</a>
			<a href="https://www.linkedin.com/in/kohl-kinning-49b377a4/">
				<img width="32" height="32" src="https://unpkg.com/simple-icons@latest/icons/linkedin.svg" alt = "Add me on LinkedIn" >
			</a>
			<a href="https://github.com/kohlkopf"> 
				<img width="32" height="32" src="https://unpkg.com/simple-icons@latest/icons/github.svg" alt = "Check out my open source projects">
			</a>

				<p>
					<small>Â©2017 Kohl Kinning</small>
					<br />
					<small>Created with Jekyll</small>
				</p>
		</footer>
	</div>
		
	<body>    
    	<script src="/js/scale.fix.js"></script>
  	</body>
	
</body>
</html>
